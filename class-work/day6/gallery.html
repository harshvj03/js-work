<! DOCTYPE HTML>
<html>
  <head>
    <title>Programmatic Event Registration....</title>
  </head>
  <body>
    <h1>Welcome to Online Shopping</h1>

    <div id="visit-count"></div>

    <div id="header"></div>

    <script>
      var flowers = [
        { title: "Gerbera", image: "images/1.jpg" },
        { title: "Rose", image: "images/2.jpg" },
        { title: "Lotus", image: "images/3.jpg" },
        { title: "Jasmine", image: "images/4.jpg" },
      ];

      for (var i = 0; i < flowers.length; i++) {
        var img = document.createElement("img");
        img.src = flowers[i].image;
        img.width = 200;
        img.height = 200;
        var src = document.getElementById("header");
        src.appendChild(img);
        var btn = document.createElement("BUTTON");
        btn.innerHTML = "Details";
        src.appendChild(btn);
      }

      var buttons = document.querySelectorAll("button");

      buttons[0].addEventListener("click", function () {
        let products = [
          { title: "Coffee Powder", image: "images/1.jpg" }
          //   { title: "Rose", image: "images/2.jpg" },
          //   { title: "Lotus", image: "images/3.jpg" },
          //   { title: "Jasmine", image: "images/4.jpg" },
        ];
        localStorage.setItem("products", JSON.stringify(products));

        window.location.href = "./details.html";
      });

      buttons[1].addEventListener("click", function () {
        products = [
        //   { title: "Gerbera", image: "images/1.jpg" },
             { title: "iPhone 11", image: "images/2.jpg" }
          //   { title: "Lotus", image: "images/3.jpg" },
          //   { title: "Jasmine", image: "images/4.jpg" },
        ];

        localStorage.setItem("products", JSON.stringify(products));

        window.location.href = "./details.html";
      });

      var count;
      var sessionCount = JSON.parse(sessionStorage.getItem("visits"));
//       console.log('sessioncount.visit' + sessionCount.visit);
      if(sessionCount == null){
                count = 0;
      }else{
              count = sessionCount.visit;
      }
      
      buttons[2].addEventListener('click',function(){
        products = [
        //   { title: "Gerbera", image: "images/1.jpg" },
        //      { title: "iPhone 11", image: "images/2.jpg" }
             { title: "Lotus", image: "images/3.jpg" },
          //   { title: "Jasmine", image: "images/4.jpg" },
        ];

        localStorage.setItem("products", JSON.stringify(products));

        count++;
        console.log('count on gallery page' + count);
        let visits = {
                visit : count
        }

        console.log("visit" + visits.visit);
        sessionStorage.setItem("visits", JSON.stringify(visits));

        window.location.href = "./details.html";
      });

     var parentDiv = document.getElementById('visit-count');
     var newvisit = JSON.parse(sessionStorage.getItem("newvisit"));
     var p1 = document.createElement('p');
     p1.innerHTML = 'visit : ' + newvisit.visit;
     parentDiv.appendChild(p1);

    </script>
  </body>
</html>
